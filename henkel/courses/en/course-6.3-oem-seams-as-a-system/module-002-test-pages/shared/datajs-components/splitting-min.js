!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()}(this,(function(){"use strict";var n=document,t=n.createTextNode.bind(n);function e(n,t,e){n.style.setProperty(t,e)}function r(n,t){return n.appendChild(t)}function o(t,e,o,i){var u=n.createElement("span");return e&&(u.className=e),o&&(!i&&u.setAttribute("data-"+e,o),u.textContent=o),t&&r(t,u)||u}function i(n,t){return n.getAttribute("data-"+t)}function $(t,e){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(e||n).querySelectorAll(t)):[]}function u(n){for(var t=[];n--;)t[n]=[];return t}function c(n,t){n&&n.some(t)}function a(n){return function(t){return n[t]}}var s={};function l(n,t,e){var r=e.indexOf(n);if(-1==r){e.unshift(n);var o=s[n];if(!o)throw new Error("plugin not loaded: "+n);c(o.depends,(function(t){l(t,n,e)}))}else{var i=e.indexOf(t);e.splice(r,1),e.splice(i,0,n)}return e}function f(n,t,e,r){return{by:n,depends:t,key:e,split:r}}function d(n){return l(n,0,[]).map(a(s))}function p(n){s[n.by]=n}function h(n,e,i,u,a){n.normalize();var s=[],l=document.createDocumentFragment();u&&s.push(n.previousSibling);var f=[];return $(n.childNodes).some((function(n){if(!n.tagName||n.hasChildNodes()){if(n.childNodes&&n.childNodes.length)return f.push(n),void s.push.apply(s,h(n,e,i,u,a));var r=n.wholeText||"",d=r.trim();d.length&&(" "===r[0]&&f.push(t(" ")),c(d.split(i),(function(n,t){t&&a&&f.push(o(l,"whitespace"," ",a));var r=o(l,e,n);s.push(r),f.push(r)}))," "===r[r.length-1]&&f.push(t(" ")))}else f.push(n)})),c(f,(function(n){r(l,n)})),n.innerHTML="",r(n,l),s}var m="words",g=f(m,0,"word",(function(n){return h(n,"word",/\s+/,0,1)})),v="chars",y=f(v,[m],"char",(function(n,t,e){var r=[];return c(e.words,(function(n,e){r.push.apply(r,h(n,"char","",t.whitespace&&e))})),r}));function w(n){var t=(n=n||{}).key;return $(n.target||"[data-splitting]").map((function(r){var o=r["üçå"];if(!n.force&&o)return o;o=r["üçå"]={el:r};var u=n.by||i(r,"splitting");u&&"true"!=u||(u=v);var a=d(u),s=function(n,t){for(var e in t)n[e]=t[e];return n}({},n);return c(a,(function(n){if(n.split){var i=n.by,u=(t?"-"+t:"")+n.key,a=n.split(r,s,o);u&&function(n,t,r){var o="--"+t,i=o+"-index";c(r,(function(n,t){Array.isArray(n)?c(n,(function(n){e(n,i,t)})):e(n,i,t)})),e(n,o+"-total",r.length)}(r,u,a),o[i]=a,r.classList.add(i)}})),r.classList.add("splitting"),o}))}function b(n,t,e){var r=$(t.matching||n.children,n),o={};return c(r,(function(n){var t=Math.round(n[e]);(o[t]||(o[t]=[])).push(n)})),Object.keys(o).map(Number).sort(N).map(a(o))}function N(n,t){return n-t}w.html=function(n){var t=(n=n||{}).target=o();return t.innerHTML=n.content,w(n),t.outerHTML},w.add=p;var x=f("lines",[m],"line",(function(n,t,e){return b(n,{matching:e.words},"offsetTop")})),T=f("items",0,"item",(function(n,t){return $(t.matching||n.children,n)})),L=f("rows",0,"row",(function(n,t){return b(n,t,"offsetTop")})),k=f("cols",0,"col",(function(n,t){return b(n,t,"offsetLeft")})),A=f("grid",["rows","cols"]),C="layout",M=f(C,0,0,(function(n,t){var u=t.rows=+(t.rows||i(n,"rows")||1),c=t.columns=+(t.columns||i(n,"columns")||1);if(t.image=t.image||i(n,"image")||n.currentSrc||n.src,t.image){var a=$("img",n)[0];t.image=a&&(a.currentSrc||a.src)}t.image&&e(n,"background-image","url("+t.image+")");for(var s=u*c,l=[],f=o(0,"cell-grid");s--;){var d=o(f,"cell");o(d,"cell-inner"),l.push(d)}return r(n,f),l})),S=f("cellRows",[C],"row",(function(n,t,e){var r=t.rows,o=u(r);return c(e.layout,(function(n,t,e){o[Math.floor(t/(e.length/r))].push(n)})),o})),H=f("cellColumns",[C],"col",(function(n,t,e){var r=t.columns,o=u(r);return c(e.layout,(function(n,t){o[t%r].push(n)})),o})),O=f("cells",["cellRows","cellColumns"],"cell",(function(n,t,e){return e.layout}));return p(g),p(y),p(x),p(T),p(L),p(k),p(A),p(M),p(S),p(H),p(O),w}));