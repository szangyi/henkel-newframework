// -----------------------------------------------------------------------------
// Layout Grid
// -----------------------------------------------------------------------------



// -----------------------------------------------------------------------------
// Grid
// -----------------------------------------------------------------------------
@mixin grid {

	:is(
		[data-grid=""],
		[data-grid="grid"],
		[data-grid^="1"],
		[data-grid^="2"],
		[data-grid^="3"],
		[data-grid^="4"],
		[data-grid^="5"],
		[data-grid^="6"]
	) {
		display: grid; 
		min-block-size: 100vh;
		min-block-size: 100svh;
		pointer-events: none;
		
		// ---------------------------------------------------------------------
        // Column/Row Sizing 
        // ---------------------------------------------------------------------
        // default col and row size 
		--ğŸ’€-grid-col-size-default: 1fr;
		--ğŸ’€-grid-row-size-default: 1fr;
		// @media (orientation: portrait), (max-height: 30rem) { 
		@media (max-aspect-ratio: 6/5), (max-height: 30rem) { 			
			--ğŸ’€-grid-row-size-default: auto;
		}


		@each $s in a b c d e f {
			--ğŸ’€-grid-col-size-#{$s}-desktop: var(--is-desktop) var(--grid-col-size-#{$s}-desktop); // if desktop
			--ğŸ’€-grid-col-size-#{$s}-tablet:  var(--is-tablet)  var(--grid-col-size-#{$s}-tablet);  // if tablet
			--ğŸ’€-grid-col-size-#{$s}-mobile:  var(--is-mobile)  var(--grid-col-size-#{$s}-mobile);  // if tablet
			--ğŸ’€-grid-col-size-#{$s}: var(--ğŸ’€-grid-col-size-#{$s}-desktop, var(--ğŸ’€-grid-col-size-#{$s}-tablet, var(--ğŸ’€-grid-col-size-#{$s}-mobile)));	
		} 
		@each $s in 1 2 3 4 5 6 {
			--ğŸ’€-grid-row-size-#{$s}-desktop: var(--is-desktop) var(--grid-row-size-#{$s}-desktop); // if desktop
			--ğŸ’€-grid-row-size-#{$s}-tablet:  var(--is-tablet)  var(--grid-row-size-#{$s}-tablet);  // if tablet
			--ğŸ’€-grid-row-size-#{$s}-mobile:  var(--is-mobile)  var(--grid-row-size-#{$s}-mobile);  // if tablet
			--ğŸ’€-grid-row-size-#{$s}: var(--ğŸ’€-grid-row-size-#{$s}-desktop, var(--ğŸ’€-grid-row-size-#{$s}-tablet, var(--ğŸ’€-grid-row-size-#{$s}-mobile)));	
		} 



		// ---------------------------------------------------------------------
        // Grid Templates 
        // ---------------------------------------------------------------------
		grid-template-columns: 
			minmax(0, var(--ğŸ’€-grid-col-size-a, var(--grid-col-size-a, var(--ğŸ’€-grid-col-size-default))))
			minmax(0, var(--ğŸ’€-grid-col-size-b, var(--grid-col-size-b, var(--ğŸ’€-grid-col-size-default))))
			minmax(0, var(--ğŸ’€-grid-col-size-c, var(--grid-col-size-c, var(--ğŸ’€-grid-col-size-default))))
			minmax(0, var(--ğŸ’€-grid-col-size-d, var(--grid-col-size-d, var(--ğŸ’€-grid-col-size-default))))
			minmax(0, var(--ğŸ’€-grid-col-size-e, var(--grid-col-size-e, var(--ğŸ’€-grid-col-size-default))))
			minmax(0, var(--ğŸ’€-grid-col-size-f, var(--grid-col-size-f, var(--ğŸ’€-grid-col-size-default))))
		;

		grid-template-rows: 
			minmax(0, var(--ğŸ’€-grid-row-size-1, var(--grid-row-size-1, var(--ğŸ’€-grid-row-size-default))))
			minmax(0, var(--ğŸ’€-grid-row-size-2, var(--grid-row-size-2, var(--ğŸ’€-grid-row-size-default))))
			minmax(0, var(--ğŸ’€-grid-row-size-3, var(--grid-row-size-3, var(--ğŸ’€-grid-row-size-default))))
			minmax(0, var(--ğŸ’€-grid-row-size-4, var(--grid-row-size-4, var(--ğŸ’€-grid-row-size-default))))
			minmax(0, var(--ğŸ’€-grid-row-size-5, var(--grid-row-size-5, var(--ğŸ’€-grid-row-size-default))))
			minmax(0, var(--ğŸ’€-grid-row-size-6, var(--grid-row-size-6, var(--ğŸ’€-grid-row-size-default))))
		;		



		// ---------------------------------------------------------------------
        // Grid Cell Placement 
        // ---------------------------------------------------------------------
        > [data-grid="guide"] > *, 
		> * {
			--ğŸ’€-if-grid-col-start-desktop: var(--is-desktop) var(--grid-col-start-desktop);
			--ğŸ’€-if-grid-col-start-tablet: var(--is-tablet) var(--grid-col-start-tablet);
			--ğŸ’€-if-grid-col-start-mobile: var(--is-mobile) var(--grid-col-start-mobile);
			--ğŸ’€-grid-col-start: var(--ğŸ’€-if-grid-col-start-desktop, var(--ğŸ’€-if-grid-col-start-tablet, var(--ğŸ’€-if-grid-col-start-mobile, var(--grid-col-start))));
			
			--ğŸ’€-if-grid-col-end-desktop: var(--is-desktop) var(--grid-col-end-desktop);
			--ğŸ’€-if-grid-col-end-tablet: var(--is-tablet) var(--grid-col-end-tablet);
			--ğŸ’€-if-grid-col-end-mobile: var(--is-mobile) var(--grid-col-end-mobile);
			--ğŸ’€-grid-col-end: var(--ğŸ’€-if-grid-col-end-desktop, var(--ğŸ’€-if-grid-col-end-tablet, var(--ğŸ’€-if-grid-col-end-mobile, var(--grid-col-end))));

			--ğŸ’€-if-grid-row-start-desktop: var(--is-desktop) var(--grid-row-start-desktop);
			--ğŸ’€-if-grid-row-start-tablet: var(--is-tablet) var(--grid-row-start-tablet);
			--ğŸ’€-if-grid-row-start-mobile: var(--is-mobile) var(--grid-row-start-mobile);
			--ğŸ’€-grid-row-start: var(--ğŸ’€-if-grid-row-start-desktop, var(--ğŸ’€-if-grid-row-start-tablet, var(--ğŸ’€-if-grid-row-start-mobile, var(--grid-row-start))));

			--ğŸ’€-if-grid-row-end-desktop: var(--is-desktop) var(--grid-row-end-desktop);
			--ğŸ’€-if-grid-row-end-tablet: var(--is-tablet) var(--grid-row-end-tablet);
			--ğŸ’€-if-grid-row-end-mobile: var(--is-mobile) var(--grid-row-end-mobile);
			--ğŸ’€-grid-row-end: var(--ğŸ’€-if-grid-row-end-desktop, var(--ğŸ’€-if-grid-row-end-tablet, var(--ğŸ’€-if-grid-row-end-mobile, var(--grid-row-end))));

			grid-column-start: var(--ğŸ’€-grid-col-start, 1);
			grid-column-end: var(--ğŸ’€-grid-col-end, 7);
			grid-row-start: var(--ğŸ’€-grid-row-start, 1);
			grid-row-end: var(--ğŸ’€-grid-row-end, 7);	
			
			container-type: inline-size;
			isolation: isolate;
			padding-block: .01px;
			&:not(:empty) { pointer-events: auto; }			
		}
	}

	[data-grid^="1"] { 
		--grid-col-size-b: 0;
		--grid-col-size-c: 0;
		--grid-col-size-d: 0;
		--grid-col-size-e: 0;
		--grid-col-size-f: 0;
	}
	[data-grid^="2"] { 
		--grid-col-size-c: 0;
		--grid-col-size-d: 0;
		--grid-col-size-e: 0;
		--grid-col-size-f: 0;
	}
	[data-grid^="3"] { 
		--grid-col-size-d: 0;
		--grid-col-size-e: 0;
		--grid-col-size-f: 0;
	}
	[data-grid^="4"] { 
		--grid-col-size-e: 0;
		--grid-col-size-f: 0;
	}
	[data-grid^="5"] { 
		--grid-col-size-f: 0;
	}

	[data-grid$="x1"] { 
		--grid-row-size-2: 0;
		--grid-row-size-3: 0;
		--grid-row-size-4: 0;
		--grid-row-size-5: 0;
		--grid-row-size-6: 0;
	}
	[data-grid$="x2"] { 
		--grid-row-size-3: 0;
		--grid-row-size-4: 0;
		--grid-row-size-5: 0;
		--grid-row-size-6: 0;
	}
	[data-grid$="x3"] { 
		--grid-row-size-4: 0;
		--grid-row-size-5: 0;
		--grid-row-size-6: 0;
	}
	[data-grid$="x4"] { 
		--grid-row-size-5: 0;
		--grid-row-size-6: 0;
	}
	[data-grid$="x5"] { 
		--grid-row-size-6: 0;
	}	



    // -------------------------------------------------------------------------
    // Split-outs (see below)
    // -------------------------------------------------------------------------
    @include grid-cells;
    @include grid-content;
}




// -----------------------------------------------------------------------------
// Grid Cells
// -----------------------------------------------------------------------------
@mixin grid-cells {
	
	@each $bp in mobile tablet desktop all {
		$sel: if($bp == all, data-grid, data-grid-#{$bp});
		$var: if($bp == all, '', -#{$bp});

		// columns
		[#{$sel}^="A" i] { --grid-col-start#{$var}: 1; --grid-col-end#{$var}: 2; --inline-start#{$var}: 10vw; }
		[#{$sel}^="B" i] { --grid-col-start#{$var}: 2; --grid-col-end#{$var}: 3; }
		[#{$sel}^="C" i] { --grid-col-start#{$var}: 3; --grid-col-end#{$var}: 4; }
		[#{$sel}^="D" i] { --grid-col-start#{$var}: 4; --grid-col-end#{$var}: 5; }
		[#{$sel}^="E" i] { --grid-col-start#{$var}: 5; --grid-col-end#{$var}: 6; }
		[#{$sel}^="F" i] { --grid-col-start#{$var}: 6; --grid-col-end#{$var}: 7; --inline-end#{$var}: 10vw; }
		[#{$sel}*=":A" i] { --grid-col-end#{$var}: 2; }
		[#{$sel}*=":B" i] { --grid-col-end#{$var}: 3; }
		[#{$sel}*=":C" i] { --grid-col-end#{$var}: 4; }
		[#{$sel}*=":D" i] { --grid-col-end#{$var}: 5; }
		[#{$sel}*=":E" i] { --grid-col-end#{$var}: 6; }
		[#{$sel}*=":F" i] { --grid-col-end#{$var}: 7; --inline-end#{$var}: 10vw; }

		// rows
		// uses vmin to reduce block safe margins on mobile
		[#{$sel}$="1"] { --grid-row-start#{$var}: 1; --grid-row-end#{$var}: 2; --block-start#{$var}: 10vmin;}
		[#{$sel}$="2"] { --grid-row-start#{$var}: 2; --grid-row-end#{$var}: 3;}
		[#{$sel}$="3"] { --grid-row-start#{$var}: 3; --grid-row-end#{$var}: 4;}
		[#{$sel}$="4"] { --grid-row-start#{$var}: 4; --grid-row-end#{$var}: 5;}
		[#{$sel}$="5"] { --grid-row-start#{$var}: 5; --grid-row-end#{$var}: 6;}
		[#{$sel}$="6"] { --grid-row-start#{$var}: 6; --grid-row-end#{$var}: 7; --block-end#{$var}: 10vmin;}		
		[#{$sel}*="1:"] { --grid-row-start#{$var}: 1; --block-start#{$var}: 10vmin;}
		[#{$sel}*="2:"] { --grid-row-start#{$var}: 2; }
		[#{$sel}*="3:"] { --grid-row-start#{$var}: 3; }
		[#{$sel}*="4:"] { --grid-row-start#{$var}: 4; }
		[#{$sel}*="5:"] { --grid-row-start#{$var}: 5; }
		[#{$sel}*="6:"] { --grid-row-start#{$var}: 6; }	
	}
	
	// grid content defaults 
	[data-grid^="A" i]:not([data-grid-desktop]) { --inline-start-desktop: 10vw; }	
	[data-grid^="A" i]:not([data-grid-tablet])  { --inline-start-tablet:  10vw; }
	[data-grid^="A" i]:not([data-grid-mobile])  { --inline-start-mobile:  5vw; }	
	:is([data-grid*=":F" i],[data-grid^="F" i]):not([data-grid-desktop]) { --inline-end-desktop: 10vw; }	
	:is([data-grid*=":F" i],[data-grid^="F" i]):not([data-grid-tablet])  { --inline-end-tablet:  10vw; }
	:is([data-grid*=":F" i],[data-grid^="F" i]):not([data-grid-mobile])  { --inline-end-mobile:  5vw; }		

	// wrapping data-grid added to prevent conflict with X by Y grid 
	[data-grid] {
		:is([data-grid$="1"],[data-grid*="1:"]):not([data-grid-desktop]) { --block-start-desktop: 10vmin; }	
		:is([data-grid$="1"],[data-grid*="1:"]):not([data-grid-tablet])  { --block-start-tablet:  10vmin; }
		:is([data-grid$="1"],[data-grid*="1:"]):not([data-grid-mobile])  { --block-start-mobile:  10vmin; }		
		[data-grid$="6"]:not([data-grid-desktop]) { --block-end-desktop: 10vmin; }	
		[data-grid$="6"]:not([data-grid-tablet])  { --block-end-tablet:  10vmin; }
		[data-grid$="6"]:not([data-grid-mobile])  { --block-end-mobile:  10vmin; }	
	}
}



// -----------------------------------------------------------------------------
// Grid Content
// -----------------------------------------------------------------------------
@mixin grid-content {
	[data-grid="content"] {
		
		// variables are inherited from the parent grid cell
		--ğŸ’€-if-inline-start-desktop: var(--is-desktop) var(--inline-start-desktop);
		--ğŸ’€-if-inline-start-tablet: var(--is-tablet) var(--inline-start-tablet);
		--ğŸ’€-if-inline-start-mobile: var(--is-mobile) var(--inline-start-mobile);		
		// --ğŸ’€-if-inline-start-all: var(--is-all) var(--inline-start);		
		--ğŸ’€-inline-start: var(--ğŸ’€-if-inline-start-desktop, var(--ğŸ’€-if-inline-start-tablet, var(--ğŸ’€-if-inline-start-mobile, 0vw)));				

		--ğŸ’€-if-inline-end-desktop: var(--is-desktop) var(--inline-end-desktop);
		--ğŸ’€-if-inline-end-tablet: var(--is-tablet) var(--inline-end-tablet);
		--ğŸ’€-if-inline-end-mobile: var(--is-mobile) var(--inline-end-mobile);		
		--ğŸ’€-inline-end: var(--ğŸ’€-if-inline-end-desktop, var(--ğŸ’€-if-inline-end-tablet, var(--ğŸ’€-if-inline-end-mobile, 0vw)));				
		
		--ğŸ’€-if-block-start-desktop: var(--is-desktop) var(--block-start-desktop);
		--ğŸ’€-if-block-start-tablet: var(--is-tablet) var(--block-start-tablet);
		--ğŸ’€-if-block-start-mobile: var(--is-mobile) var(--block-start-mobile);		
		--ğŸ’€-block-start: var(--ğŸ’€-if-block-start-desktop, var(--ğŸ’€-if-block-start-tablet, var(--ğŸ’€-if-block-start-mobile, 0vh)));				

		--ğŸ’€-if-block-end-desktop: var(--is-desktop) var(--block-end-desktop);
		--ğŸ’€-if-block-end-tablet: var(--is-tablet) var(--block-end-tablet);
		--ğŸ’€-if-block-end-mobile: var(--is-mobile) var(--block-end-mobile);		
		--ğŸ’€-block-end: var(--ğŸ’€-if-block-end-desktop, var(--ğŸ’€-if-block-end-tablet, var(--ğŸ’€-if-block-end-mobile, 0vh)));				
		
		margin-inline: var(--ğŸ’€-inline-start) var(--ğŸ’€-inline-end);
		margin-block: var(--ğŸ’€-block-start) var(--ğŸ’€-block-end);		
		inline-size: calc(100% - var(--ğŸ’€-inline-start) - var(--ğŸ’€-inline-end));
		block-size:  calc(100% - var(--ğŸ’€-block-start) - var(--ğŸ’€-block-end));		
	}
}






